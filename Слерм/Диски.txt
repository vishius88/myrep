Отлично, давай разбираться с LVM — одной из ключевых тем для мидл-синьор админа!

---

### Основные понятия LVM:

* **PV (Physical Volume)** — физический том, то есть реальный блок устройства (например, целый диск `/dev/sdb` или раздел `/dev/sdb1`), который инициализируется как физический том для LVM.
* **VG (Volume Group)** — группа томов, объединяющая один или несколько PV в один большой пул хранения.
* **LV (Logical Volume)** — логический том, который создаётся внутри VG и фактически монтируется и используется системой, как обычный раздел или диск.

---

### Пример и взаимосвязь:

1. Имеется диск `/dev/sdb`.
2. Создаём на нём PV:

   ```bash
   pvcreate /dev/sdb
   ```
3. Создаём VG, например `vg_data`, на базе этого PV:

   ```bash
   vgcreate vg_data /dev/sdb
   ```
4. Создаём LV, например `lv_storage` размером 100G из VG:

   ```bash
   lvcreate -L 100G -n lv_storage vg_data
   ```
5. Форматируем LV в нужную файловую систему:

   ```bash
   mkfs.ext4 /dev/vg_data/lv_storage
   ```
6. Монтируем LV:

   ```bash
   mount /dev/vg_data/lv_storage /mnt/storage
   ```

---

### Зачем использовать LVM?

* Гибкость в управлении дисками — можно динамически расширять тома без переформатирования.
* Создание снапшотов для резервного копирования.
* Объединение нескольких физических дисков в один пул (VG).
* Упрощение управления пространством и резервированием.

---

### Команды для диагностики:

* Посмотреть PV:

  ```bash
  pvdisplay
  ```
* Посмотреть VG:

  ```bash
  vgdisplay
  ```
* Посмотреть LV:

  ```bash
  lvdisplay
  ```
* Быстрый обзор:

  ```bash
  pvs
  vgs
  lvs
  ```

---





Хороший вопрос! Расширение томов в LVM — одна из ключевых операций, которую должен уметь делать админ. Расскажу по шагам, как это сделать.

---

### Расширение логического тома (LV) — самый частый кейс

#### Шаг 1. Проверить, сколько свободного места есть в VG

```bash
vgdisplay vg_name
```

Или короче:

```bash
vgs
```

Обрати внимание на поле **Free PE / Size** — это свободное пространство, которое можно добавить в LV.

#### Шаг 2. Расширить LV, например, увеличить на 20 ГБ

```bash
lvextend -L +20G /dev/vg_name/lv_name
```

Или можно указать конкретный размер:

```bash
lvextend -L 150G /dev/vg_name/lv_name
```

#### Шаг 3. Расширить файловую систему, чтобы использовать новое пространство

* Для `ext4`:

```bash
resize2fs /dev/vg_name/lv_name
```

* Для `xfs` (часто используется на серверах):

```bash
xfs_growfs /mount/point
```

Важно: для `xfs` нужно расширять файловую систему **только после** расширения LV, и обязательно указывать точку монтирования, а не устройство.

---

### Если в VG нет свободного места

Тогда сначала надо добавить новый PV (новый диск или раздел) в VG:

```bash
pvcreate /dev/sdX
vgextend vg_name /dev/sdX
```

После этого можно повторить расширение LV.

---

### Проверка результата

* Размер LV:

```bash
lvdisplay /dev/vg_name/lv_name
```

* Использование места:

```bash
df -h /mount/point
```

---

Если хочешь, могу составить небольшой сценарий с конкретными командами для практики!
